<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset=" utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="renderer" content="webkit" />
	<title>å€‰åº«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </title>
	<link rel="shortcut icon" href="https://i.jpg.dog/3239c9f8261900ee0a360263c616c50d.png" />
	<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
	<link href="//cdn.staticfile.org/layui/2.8.18/css/layui.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/@unocss/runtime"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.7.15/vue.min.js"></script>
	<script src="https://unpkg.com/element-ui/lib/index.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.2/axios.min.js"></script>
	<script src="//cdn.staticfile.org/layui/2.8.18/layui.js"></script>
</head>

<body>
  <div id="app">
	  <h1>home</h1>
	  <el-button type="info" plain  @click="tStock">æƒ…æŠ¥ä¸€è§ˆ</el-button>
	  <el-button type="info" plain  @click="logout">é€€å‡ºç™»å½•</el-button>



  </div>
  <script>
    new Vue({
      el: '#app',
      data() {
        return {
          msg: 'ç™»å½•æˆåŠŸï¼',
        }
      },
      computed: { },
      created() { },
      mounted() {
		if (sessionStorage.getItem('firstIn') == 'true') {
			this.hello()
			sessionStorage.setItem('firstIn', 'false');
		}
	  },
      methods: {
		async logout(){
			let res = await axios({
                url: 'http://localhost:8888/api/logout',
                method: 'get',
            })
              console.log('res-------->', res)
              if (String(res.data.code) === '1') {
                localStorage.setItem('userInfo', '')
                location.reload()
              } else {
                this.$message.error(res.data.msg)
              }
		  },
		  async tStock(){
			  window.location.href = '/tStock.html'
		  },
        hello() {
		  this.$message({
	          message: this.msg,
	          type: 'success'
	        })
        },
      },
    })
  </script>
  <style>
    html body {
      margin: 0;
      padding: 0;
      height: 100%;
    }
    .el-form-item__content {
    display: flex;
    justify-content: space-around;
	}
  </style>
	<div id="app">

		<div class="layui-layout layui-layout-admin">
			<div class="layui-header">
				<div class="layui-logo layui-hide-xs layui-bg-black">å€‰åº«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </div>
				<!-- å¤´éƒ¨åŒºåŸŸï¼ˆå¯é…åˆlayui å·²æœ‰çš„æ°´å¹³å¯¼èˆªï¼‰ -->
				<ul class="layui-nav layui-layout-right">
					<button lay-event="logout" class="layui-btn layui-btn-primary "
						style="right: 7px;top: 11px;position: absolute;color: white;">é€€å‡ºç™»å½•</button>
				</ul>
			</div>

			<div class="layui-side layui-bg-black">
				<div class="layui-side-scroll">
					<!-- å·¦ä¾§å¯¼èˆªåŒºåŸŸï¼ˆå¯é…åˆlayuiå·²æœ‰çš„å‚ç›´å¯¼èˆªï¼‰ -->
					<ul class="layui-nav layui-nav-tree" lay-filter="test">
						<li class="layui-nav-item layui-nav-itemed">
							<a class="" href="javascript:;">åœ¨åº«å•†å“æƒ…å ±</a>
							<dl class="layui-nav-child">
								<dd class="layui-this"><a href="http://localhost:8888/home.html">åœ¨åº«å•†å“æƒ…å ±ä¸€è¦§</a></dd>
								<dd><a href="http://localhost:8888/stockAdd.html">åœ¨åº«å•†å“æƒ…å ±ç™»éŒ²</a></dd>
							</dl>
						</li>
					</ul>
					<ul class="layui-nav layui-nav-tree" lay-filter="test">
						<li class="layui-nav-item layui-nav-itemed">
							<a class="" href="javascript:;">å…¥å‡ºåº«æƒ…å ±</a>
							<dl class="layui-nav-child">
								<dd><a href="http://localhost:8888/stockIO.html">å…¥å‡ºåº«æƒ…å ±ä¸€è¦§</a></dd>
								<dd><a href="http://localhost:8888/stockIOAdd.html">å…¥å‡ºåº«æƒ…å ±ç™»éŒ²</a></dd>
							</dl>
						</li>
					</ul>
				</div>
			</div>
			<div class="layui-body">
				<!-- å†…å®¹ä¸»ä½“åŒºåŸŸ -->
				<div style="padding: 15px;">





					<form class="layui-form layui-row layui-col-space16">
						<div class="layui-col-md4">
							<div class="layui-input-wrap">
								<div class="layui-input-prefix">
									<i class="layui-icon layui-icon-username"></i>
								</div>
								<input type="text" name="A" value="" placeholder="Field A" class="layui-input"
									lay-affix="clear">
							</div>
						</div>
						<div class="layui-col-md4">
							<div class="layui-input-wrap">
								<input type="text" name="B" placeholder="Field B" lay-affix="clear" class="layui-input">
							</div>
						</div>
						<div class="layui-col-md4">
							<div class="layui-input-wrap">
								<div class="layui-input-prefix">
									<i class="layui-icon layui-icon-date"></i>
								</div>
								<input type="text" name="C" readonly placeholder="Field C"
									class="layui-input demo-table-search-date">
							</div>
						</div>
						<div class="layui-btn-container layui-col-xs12">
							<button class="layui-btn" lay-submit lay-filter="demo-table-search">Search</button>
							<button type="reset" class="layui-btn layui-btn-primary">Clear</button>
						</div>
					</form>






					<div style="padding: 16px;">
						<table class="layui-hide" id="test" lay-filter="test"></table>
					</div>

<!--					<script type="text/html" id="toolbarDemo">
					  <div class="layui-btn-container">
					    <button class="layui-btn layui-btn-sm" lay-event="getCheckData">è·å–é€‰ä¸­è¡Œæ•°æ®</button>
					    <button class="layui-btn layui-btn-sm" lay-event="getData">è·å–å½“å‰é¡µæ•°æ®</button>
					    <button class="layui-btn layui-btn-sm" id="dropdownButton">
					      ä¸‹æ‹‰æŒ‰é’®
					      <i class="layui-icon layui-icon-down layui-font-12"></i>
					    </button>
					    <button class="layui-btn layui-btn-sm layui-bg-blue" id="reloadTest">
					      é‡è½½æµ‹è¯•
					      <i class="layui-icon layui-icon-down layui-font-12"></i>
					    </button>
					    <button class="layui-btn layui-btn-sm layui-btn-primary" id="rowMode">
					      <span>{{= d.lineStyle ? 'å¤šè¡Œ' : 'å•è¡Œ' }}æ¨¡å¼</span>
					      <i class="layui-icon layui-icon-down layui-font-12"></i>
					    </button>
					  </div>
					</script>-->

					<script type="text/html" id="barDemo">
					  <div class="layui-clear-space">
					    <a class="layui-btn layui-btn-xs" lay-event="edit">ç¼–è¾‘</a>
					    <a class="layui-btn layui-btn-xs" lay-event="more">
					      æ›´å¤š
					      <i class="layui-icon layui-icon-down"></i>
					    </a>
					  </div>
					</script>







				</div>
			</div>


		</div>
		<script>

			function dateHandle1(jsondate) {
				if (jsondate != null) {
					var date = new Date(parseInt(jsondate.replace("/Date(", "").replace(")/", ""), 10));
					var year = date.getFullYear();
					var month = date.getMonth() + 1;
					var day = date.getDate();
					var hh = date.getHours();
					var mm = date.getMinutes();
					var ss = date.getSeconds();
					return year + "-" + month + "-" + day + " " + hh + ":" + mm + ":" + ss;
				}
			}


			function dateHandle(dateTimeString) {

				console.log(dateTimeString)

				const date = new Date(dateTimeString);
				const year = date.getFullYear();
				const month = (date.getMonth() + 1).toString().padStart(2, '0');
				const day = date.getDate().toString().padStart(2, '0');
				const hours = date.getHours().toString().padStart(2, '0');
				const minutes = date.getMinutes().toString().padStart(2, '0');
				const seconds = date.getSeconds().toString().padStart(2, '0');

				return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
			}

			new Vue({
				el: '#app',
				data() {
					return {
						msg: 'ç™»å½•æˆåŠŸï¼',
					}
				},
				computed: {},
				created() { },
				mounted() {
					if (sessionStorage.getItem('firstIn') == 'true') {
						this.hello()
						sessionStorage.setItem('firstIn', 'false');
					}
				},
				methods: {
					async logout() {
						console.log('logout....')
						let res = await axios({
							url: 'http://localhost:8888/api/logout',
							method: 'get',
						})
						console.log('res-------->', res)
						if (String(res.data.code) === '1') {
							localStorage.setItem('userInfo', '')
							location.reload()
						} else {
							this.$message.error(res.data.msg)
						}
					},
					hello() {
						this.$message({
							message: this.msg,
							type: 'success'
						})
					},
				},
			})


			layui.use(['table', 'dropdown'], function () {
				var table = layui.table;
				var dropdown = layui.dropdown;
				var util = layui.util;
				util.on('lay-event', {
					logout: async function () {
						console.log('logout....')
						let res = await axios({
							url: 'http://localhost:8888/api/logout',
							method: 'get',
						})
						console.log('res-------->', res)
						if (String(res.data.code) === '1') {
							localStorage.setItem('userInfo', '')
							location.reload()
						} else {
							this.$message.error(res.data.msg)
						}

					},
				});
				// åˆ›å»ºæ¸²æŸ“å®ä¾‹
				table.render({
					elem: '#test',
					url: 'http://localhost:8888/api/stock/list', // æ­¤å¤„ä¸ºé™æ€æ¨¡æ‹Ÿæ•°æ®ï¼Œå®é™…ä½¿ç”¨æ—¶éœ€æ¢æˆçœŸå®æ¥å£
					toolbar: '#toolbarDemo',
					defaultToolbar: ['filter', 'exports', 'print', {
						title: 'æç¤º',
						layEvent: 'LAYTABLE_TIPS',
						icon: 'layui-icon-tips'
					}],
					height: 'full-35', // æœ€å¤§é«˜åº¦å‡å»å…¶ä»–å®¹å™¨å·²å æœ‰çš„é«˜åº¦å·®
					css: [ // é‡è®¾å½“å‰è¡¨æ ¼æ ·å¼
						'.layui-table-tool-temp{padding-right: 145px;}'
					].join(''),
					cellMinWidth: 80,
					totalRow: true, // å¼€å¯åˆè®¡è¡Œ
					page: true,
					cols: [[
						{type: 'checkbox', title: 'ğŸ˜Š', fixed: true},
						{field: 'stockId', title: 'åœ¨åº«ID', width: 100, sort: true, fixed: true},
						{field: 'name', title: 'åœ¨åº«åç§°', width: 120},
						{field: 'unitId', title: 'å˜ä½ID', width: 120, sort: true},
						{field: 'stockNum', title: 'åœ¨åº«æ•°é‡', width: 120},
						{field: 'createUser', title: 'æ›´æ–°è€…', width: 100},
						{field: 'createDate', title: 'æ›´æ–°æ—¥æ™‚', sort: true, width: 200, templet: function (d) {return dateHandle(d.createDate)}},
						{field: 'updateUser', title: 'ä½œæˆè€…', width: 100},
						{field: 'updateDate', title: 'ä½œæˆæ—¥æ™‚', sort: true, width: 200, templet: function (d) {return dateHandle(d.updateDate)}},
						{fixed: 'right', title: 'æ“ä½œ', width: 134, minWidth: 125, toolbar: '#barDemo'}
					]],
					done: function () {
						var id = this.id;
						// ä¸‹æ‹‰æŒ‰é’®æµ‹è¯•
						dropdown.render({
							elem: '#dropdownButton', // å¯ç»‘å®šåœ¨ä»»æ„å…ƒç´ ä¸­ï¼Œæ­¤å¤„ä»¥ä¸Šè¿°æŒ‰é’®ä¸ºä¾‹
							data: [{
								id: 'add',
								title: 'æ·»åŠ '
							}, {
								id: 'update',
								title: 'ç¼–è¾‘'
							}, {
								id: 'delete',
								title: 'åˆ é™¤'
							}],
							// èœå•è¢«ç‚¹å‡»çš„äº‹ä»¶
							click: function (obj) {
								var checkStatus = table.checkStatus(id)
								var data = checkStatus.data; // è·å–é€‰ä¸­çš„æ•°æ®
								switch (obj.id) {
									case 'add':
										layer.open({
											title: 'æ·»åŠ ',
											type: 1,
											area: ['80%', '80%'],
											content: '<div style="padding: 16px;">è‡ªå®šä¹‰è¡¨å•å…ƒç´ </div>'
										});
										break;
									case 'update':
										if (data.length !== 1) return layer.msg('è¯·é€‰æ‹©ä¸€è¡Œ');
										layer.open({
											title: 'ç¼–è¾‘',
											type: 1,
											area: ['80%', '80%'],
											content: '<div style="padding: 16px;">è‡ªå®šä¹‰è¡¨å•å…ƒç´ </div>'
										});
										break;
									case 'delete':
										if (data.length === 0) {
											return layer.msg('è¯·é€‰æ‹©ä¸€è¡Œ');
										}
										layer.msg('delete event');
										break;
								}
							}
						});

						// é‡è½½æµ‹è¯•
						dropdown.render({
							elem: '#reloadTest', // å¯ç»‘å®šåœ¨ä»»æ„å…ƒç´ ä¸­ï¼Œæ­¤å¤„ä»¥ä¸Šè¿°æŒ‰é’®ä¸ºä¾‹
							data: [{
								id: 'reload',
								title: 'é‡è½½'
							}, {
								id: 'reload-deep',
								title: 'é‡è½½ - å‚æ•°å åŠ '
							}, {
								id: 'reloadData',
								title: 'ä»…é‡è½½æ•°æ®'
							}, {
								id: 'reloadData-deep',
								title: 'ä»…é‡è½½æ•°æ® - å‚æ•°å åŠ '
							}],
							// èœå•è¢«ç‚¹å‡»çš„äº‹ä»¶
							click: function (obj) {
								switch (obj.id) {
									case 'reload':
										// é‡è½½ - é»˜è®¤ï¼ˆå‚æ•°é‡ç½®ï¼‰
										table.reload('test', {
											where: {
												abc: '123456',
												//test: 'æ–°çš„ test2',
												//token: 'æ–°çš„ token2'
											},
											/*
											cols: [[ // é‡ç½®è¡¨å¤´
											  {type: 'checkbox', fixed: 'left'},
											  {field:'id', title:'ID', width:80, fixed: 'left', unresize: true, sort: true, totalRowText: 'åˆè®¡ï¼š'},
											  {field:'sex', title:'æ€§åˆ«', width:80, edit: 'text', sort: true},
											  {field:'experience', title:'ç§¯åˆ†', width:80, sort: true, totalRow: true, templet: '<div>{{= d.experience }} åˆ†</div>'},
											  {field:'logins', title:'ç™»å…¥æ¬¡æ•°', width:100, sort: true, totalRow: true},
											  {field:'joinTime', title:'åŠ å…¥æ—¶é—´', width:120}
											]]
											*/
										});
										break;
									case 'reload-deep':
										// é‡è½½ - æ·±åº¦ï¼ˆå‚æ•°å åŠ ï¼‰
										table.reload('test', {
											where: {
												abc: 123,
												test: 'æ–°çš„ test1'
											},
											//defaultToolbar: ['print'], // é‡è½½å¤´éƒ¨å·¥å…·æ å³ä¾§å›¾æ ‡
											//cols: ins1.config.cols
										}, true);
										break;
									case 'reloadData':
										// æ•°æ®é‡è½½ - å‚æ•°é‡ç½®
										table.reloadData('test', {
											where: {
												abc: '123456',
												//test: 'æ–°çš„ test2',
												//token: 'æ–°çš„ token2'
											},
											scrollPos: 'fixed',  // ä¿æŒæ»šåŠ¨æ¡ä½ç½®ä¸å˜ - v2.7.3 æ–°å¢
											height: 2000, // æµ‹è¯•æ— æ•ˆå‚æ•°ï¼ˆå³ä¸æ•°æ®æ— å…³çš„å‚æ•°è®¾ç½®æ— æ•ˆï¼Œæ­¤å¤„ä»¥ height è®¾ç½®æ— æ•ˆä¸ºä¾‹ï¼‰
											//url: '404',
											//page: {curr: 1, limit: 30} // é‡æ–°æŒ‡å‘åˆ†é¡µ
										});
										break;
									case 'reloadData-deep':
										// æ•°æ®é‡è½½ - å‚æ•°å åŠ 
										table.reloadData('test', {
											where: {
												abc: 123,
												test: 'æ–°çš„ test1'
											}
										}, true);
										break;
								}
								layer.msg('å¯è§‚å¯Ÿ Network è¯·æ±‚å‚æ•°çš„å˜åŒ–');
							}
						});

						// è¡Œæ¨¡å¼
						dropdown.render({
							elem: '#rowMode',
							data: [{
								id: 'default-row',
								title: 'å•è¡Œæ¨¡å¼ï¼ˆé»˜è®¤ï¼‰'
							}, {
								id: 'multi-row',
								title: 'å¤šè¡Œæ¨¡å¼'
							}],
							// èœå•è¢«ç‚¹å‡»çš„äº‹ä»¶
							click: function (obj) {
								var checkStatus = table.checkStatus(id)
								var data = checkStatus.data; // è·å–é€‰ä¸­çš„æ•°æ®
								switch (obj.id) {
									case 'default-row':
										table.reload('test', {
											lineStyle: null // æ¢å¤å•è¡Œ
										});
										layer.msg('å·²è®¾ä¸ºå•è¡Œ');
										break;
									case 'multi-row':
										table.reload('test', {
											// è®¾ç½®è¡Œæ ·å¼ï¼Œæ­¤å¤„ä»¥è®¾ç½®å¤šè¡Œé«˜åº¦ä¸ºä¾‹ã€‚è‹¥ä¸ºå•è¡Œï¼Œåˆ™æ²¡å¿…è¦è®¾ç½®æ”¹å‚æ•° - æ³¨ï¼šv2.7.0 æ–°å¢
											lineStyle: 'height: 95px;'
										});
										layer.msg('å³é€šè¿‡è®¾ç½® lineStyle å‚æ•°å¯å¼€å¯å¤šè¡Œ');
										break;
								}
							}
						});
					},
					error: function (res, msg) {
						console.log(res, msg)
					}
				});

				// å·¥å…·æ äº‹ä»¶
				table.on('toolbar(test)', function (obj) {
					var id = obj.config.id;
					var checkStatus = table.checkStatus(id);
					var othis = lay(this);
					switch (obj.event) {
						case 'getCheckData':
							var data = checkStatus.data;
							layer.alert(layui.util.escape(JSON.stringify(data)));
							break;
						case 'getData':
							var getData = table.getData(id);
							console.log(getData);
							layer.alert(layui.util.escape(JSON.stringify(getData)));
							break;
						case 'LAYTABLE_TIPS':
							layer.alert('è‡ªå®šä¹‰å·¥å…·æ å›¾æ ‡æŒ‰é’®');
							break;
					};
				});
				// è¡¨å¤´è‡ªå®šä¹‰å…ƒç´ å·¥å…·äº‹ä»¶ --- 2.8.8+
				table.on('colTool(test)', function (obj) {
					var event = obj.event;
					console.log(obj);
					if (event === 'email-tips') {
						layer.alert(layui.util.escape(JSON.stringify(obj.col)), {
							title: 'å½“å‰åˆ—å±æ€§é…ç½®é¡¹'
						});
					}
				});

				// è§¦å‘å•å…ƒæ ¼å·¥å…·äº‹ä»¶
				table.on('tool(test)', function (obj) { // åŒå‡» toolDouble
					var data = obj.data; // è·å¾—å½“å‰è¡Œæ•°æ®
					// console.log(obj)
					if (obj.event === 'edit') {
						layer.open({
							title: 'ç¼–è¾‘ - id:' + data.id,
							type: 1,
							area: ['80%', '80%'],
							content: '<div style="padding: 16px;">è‡ªå®šä¹‰è¡¨å•å…ƒç´ </div>'
						});
					} else if (obj.event === 'more') {
						// æ›´å¤š - ä¸‹æ‹‰èœå•
						dropdown.render({
							elem: this, // è§¦å‘äº‹ä»¶çš„ DOM å¯¹è±¡
							show: true, // å¤–éƒ¨äº‹ä»¶è§¦å‘å³æ˜¾ç¤º
							data: [{
								title: 'æŸ¥çœ‹',
								id: 'detail'
							}, {
								title: 'åˆ é™¤',
								id: 'del'
							}],
							click: function (menudata) {
								if (menudata.id === 'detail') {
									layer.msg('æŸ¥çœ‹æ“ä½œï¼Œå½“å‰è¡Œ ID:' + data.id);
								} else if (menudata.id === 'del') {
									layer.confirm('çœŸçš„åˆ é™¤è¡Œ [id: ' + data.id + '] ä¹ˆ', function (index) {
										obj.del(); // åˆ é™¤å¯¹åº”è¡Œï¼ˆtrï¼‰çš„DOMç»“æ„
										layer.close(index);
										// å‘æœåŠ¡ç«¯å‘é€åˆ é™¤æŒ‡ä»¤
									});
								}
							},
							align: 'right', // å³å¯¹é½å¼¹å‡º
							style: 'box-shadow: 1px 1px 10px rgb(0 0 0 / 12%);' // è®¾ç½®é¢å¤–æ ·å¼
						})
					}
				});

				// è§¦å‘è¡¨æ ¼å¤é€‰æ¡†é€‰æ‹©
				table.on('checkbox(test)', function (obj) {
					console.log(obj)
				});

				// è§¦å‘è¡¨æ ¼å•é€‰æ¡†é€‰æ‹©
				table.on('radio(test)', function (obj) {
					console.log(obj)
				});

				// è¡Œå•å‡»äº‹ä»¶
				table.on('row(test)', function (obj) {
					//console.log(obj);
					//layer.closeAll('tips');
				});
				// è¡ŒåŒå‡»äº‹ä»¶
				table.on('rowDouble(test)', function (obj) {
					console.log(obj);
				});

				// å•å…ƒæ ¼ç¼–è¾‘äº‹ä»¶
				table.on('edit(test)', function (obj) {
					var field = obj.field; // å¾—åˆ°å­—æ®µ
					var value = obj.value; // å¾—åˆ°ä¿®æ”¹åçš„å€¼
					var data = obj.data; // å¾—åˆ°æ‰€åœ¨è¡Œæ‰€æœ‰é”®å€¼
					// å€¼çš„æ ¡éªŒ
					if (field === 'email') {
						if (!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(obj.value)) {
							layer.tips('è¾“å…¥çš„é‚®ç®±æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°ç¼–è¾‘', this, {tips: 1});
							return obj.reedit(); // é‡æ–°ç¼–è¾‘ -- v2.8.0 æ–°å¢
						}
					}
					// ç¼–è¾‘åç»­æ“ä½œï¼Œå¦‚æäº¤æ›´æ–°è¯·æ±‚ï¼Œä»¥å®ŒæˆçœŸå®çš„æ•°æ®æ›´æ–°
					// â€¦
					layer.msg('ç¼–è¾‘æˆåŠŸ', {icon: 1});

					// å…¶ä»–æ›´æ–°æ“ä½œ
					var update = {};
					update[field] = value;
					obj.update(update);
				});
			});
		</script>

		<style>
			html body {
				margin: 0;
				padding: 0;
				height: 100%;
			}

			.el-form-item__content {
				display: flex;
				justify-content: space-around;
			}
		</style>

</body>

</html>